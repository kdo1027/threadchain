{"ast":null,"code":"import _defineProperty from \"/Users/khanhdo/Documents/threadchain/social-network/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport speedometer from \"./speedometer.js\";\nimport throttle from \"./throttle.js\";\nimport utils from \"../utils.js\";\nexport var progressEventReducer = function progressEventReducer(listener, isDownloadStream) {\n  var freq = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 3;\n  var bytesNotified = 0;\n\n  var _speedometer = speedometer(50, 250);\n\n  return throttle(function (e) {\n    var loaded = e.loaded;\n    var total = e.lengthComputable ? e.total : undefined;\n    var progressBytes = loaded - bytesNotified;\n\n    var rate = _speedometer(progressBytes);\n\n    var inRange = loaded <= total;\n    bytesNotified = loaded;\n\n    var data = _defineProperty({\n      loaded: loaded,\n      total: total,\n      progress: total ? loaded / total : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e,\n      lengthComputable: total != null\n    }, isDownloadStream ? 'download' : 'upload', true);\n\n    listener(data);\n  }, freq);\n};\nexport var progressEventDecorator = function progressEventDecorator(total, throttled) {\n  var lengthComputable = total != null;\n  return [function (loaded) {\n    return throttled[0]({\n      lengthComputable: lengthComputable,\n      total: total,\n      loaded: loaded\n    });\n  }, throttled[1]];\n};\nexport var asyncDecorator = function asyncDecorator(fn) {\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return utils.asap(function () {\n      return fn.apply(void 0, args);\n    });\n  };\n};","map":null,"metadata":{},"sourceType":"module"}